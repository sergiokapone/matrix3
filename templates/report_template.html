<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>{{ metadata.title or "–ú–∞—Ç—Ä–∏—Ü—ñ –∫–æ–º–ø–µ—Ç–µ–Ω—Ü—ñ–π" }} - –ó–≤—ñ—Ç</title>
    <link rel="stylesheet" type="text/css" href="assets/styles.css">
</head>
<body>
<h1>üìä {{ metadata.title or "–ó–≤—ñ—Ç –ø–æ –º–∞—Ç—Ä–∏—Ü—è—Ö –∫–æ–º–ø–µ—Ç–µ–Ω—Ü—ñ–π" }}</h1>

{% if metadata %}
<div class="metadata">
    <h3>‚ÑπÔ∏è –Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ –ø—Ä–æ–≥—Ä–∞–º—É</h3>

    {% if metadata.university %}
        <p><strong>–í–ù–ó:</strong> {{ metadata.university }}</p>
    {% endif %}
    {% if metadata.faculty %}
        <p><strong>–ü—ñ–¥—Ä–æ–∑–¥—ñ–ª:</strong> {{ metadata.faculty }}</p>
    {% endif %}
    {% if metadata.department %}
        <p><strong>–ö–∞—Ñ–µ–¥—Ä–∞:</strong> {{ metadata.department }}</p>
    {% endif %}
    {% if metadata.specialty %}
        <p><strong>–°–ø–µ—Ü—ñ–∞–ª—å–Ω—ñ—Å—Ç—å:</strong> {{ metadata.specialty }}</p>
    {% endif %}
    {% if metadata.specialization %}
        <p><strong>–°–ø–µ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è:</strong> {{ metadata.specialization }}</p>
    {% endif %}
    {% if metadata.degree %}
        <p><strong>–û—Å–≤—ñ—Ç–Ω—ñ–π —Ä—ñ–≤–µ–Ω—å:</strong> {{ metadata.degree }}</p>
    {% endif %}
    {% if metadata.year %}
        <p><strong>–†—ñ–∫:</strong> {{ metadata.year }}</p>
    {% endif %}
    {% if metadata.credits_total %}
        <p><strong>–û–±—Å—è–≥ –ø—Ä–æ–≥—Ä–∞–º–∏:</strong> {{ metadata.credits_total }} –∫—Ä–µ–¥–∏—Ç—ñ–≤ –Ñ–ö–¢–°</p>
    {% endif %}
    {% if metadata.study_years %}
        <p><strong>–¢–µ—Ä–º—ñ–Ω –Ω–∞–≤—á–∞–Ω–Ω—è:</strong> {{ metadata.study_years }} —Ä–æ–∫–∏</p>
    {% endif %}
    {% if metadata.website %}
        <p><strong>–°–∞–π—Ç:</strong> <a href="{{ metadata.website }}" target="_blank">{{ metadata.website }}</a></p>
    {% endif %}
    {% if metadata.version %}
        <p><strong>–í–µ—Ä—Å—ñ—è –º–∞—Ç—Ä–∏—Ü—ñ:</strong> {{ metadata.version }}</p>
    {% endif %}
    {% if metadata.last_updated %}
        <p><strong>–û—Å—Ç–∞–Ω–Ω—î –æ–Ω–æ–≤–ª–µ–Ω–Ω—è:</strong> {{ metadata.last_updated }}</p>
    {% endif %}
</div>
{% endif %}


<p><strong>–ó–≤—ñ—Ç –∑–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω–æ:</strong> {{ generated_at }}</p>

<div class="stats">
    <h3>üìà –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h3>
    <p><strong>–í—Å—å–æ–≥–æ –¥–∏—Å—Ü–∏–ø–ª—ñ–Ω:</strong> {{ disciplines|length }}</p>
    <p><strong>–ó–∞–ø–æ–≤–Ω–µ–Ω–æ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–æ—Å—Ç–µ–π:</strong> {{ mappings|length }}</p>
    <p><strong>–ó–∞–ª–∏—à–∏–ª–æ—Å—å –∑–∞–ø–æ–≤–Ω–∏—Ç–∏:</strong> {{ unfilled_disciplines|length }}</p>
</div>

{% if unfilled_disciplines %}
<div class="unfilled">
    <h4>‚ö†Ô∏è –ù–µ–∑–∞–ø–æ–≤–Ω–µ–Ω—ñ –¥–∏—Å—Ü–∏–ø–ª—ñ–Ω–∏:</h4>
    <ul>
        {% for code in unfilled_disciplines %}
        <li>{{ code }}: {{ disciplines[code] }}</li>
        {% endfor %}
    </ul>
</div>
{% endif %}

<h2>üéØ –ú–∞—Ç—Ä–∏—Ü—è –∫–æ–º–ø–µ—Ç–µ–Ω—Ü—ñ–π</h2>
<table>
<tr>
    <th>–ö–æ–º–ø–µ—Ç–µ–Ω—Ü—ñ—è</th>
    {% for disc_code, disc in disciplines.items() %}
        <th class="discipline-header" title="{{ disc.name }}">{{ disc_code }}</th>
    {% endfor %}
</tr>

{% for comp_code, comp_desc in competencies.items() %}
<tr>
    <td title="{{ comp_desc }}"><strong>{{ comp_code }}</strong></td>
    {% for disc_code in disciplines.keys() %}
        {% set has_mapping = disc_code in mappings and comp_code in mappings[disc_code].get("competencies", []) %}
        <td class="{{ "filled" if has_mapping else "empty" }}">{{ "+" if has_mapping else "" }}</td>
    {% endfor %}
</tr>
{% endfor %}
</table>

<h2>üéØ –ú–∞—Ç—Ä–∏—Ü—è –ø—Ä–æ–≥—Ä–∞–º–Ω–∏—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤</h2>
<table>
<tr>
    <th>–ü—Ä–æ–≥—Ä–∞–º–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç</th>
    {% for disc_code, disc in disciplines.items() %}
        <th class="discipline-header" title="{{ disc.name }}">{{ disc_code }}</th>
    {% endfor %}
</tr>

{% for prog_code, prog_desc in program_results.items() %}
<tr>
    <td title="{{ prog_desc }}"><strong>{{ prog_code }}</strong></td>
    {% for disc_code in disciplines.keys() %}
        {% set has_mapping = disc_code in mappings and prog_code in mappings[disc_code].get("program_results", []) %}
        <td class="{{ "filled" if has_mapping else "empty" }}">{{ "+" if has_mapping else "" }}</td>
    {% endfor %}
</tr>
{% endfor %}
</table>

<h2>üìã –ó–≤–µ–¥–µ–Ω–∞ —Ç–∞–±–ª–∏—Ü—è –ø–æ –¥–∏—Å—Ü–∏–ø–ª—ñ–Ω–∞—Ö</h2>
<table style="width: 100%;">
<tr>
    <th style="width: 15%;">–ö–æ–¥</th>
    <th style="width: 30%;">–î–∏—Å—Ü–∏–ø–ª—ñ–Ω–∞</th>
    <th style="width: 27.5%;">–ö–æ–º–ø–µ—Ç–µ–Ω—Ü—ñ—ó</th>
    <th style="width: 27.5%;">–ü—Ä–æ–≥—Ä–∞–º–Ω—ñ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏</th>
</tr>
{% for disc_code, disc in disciplines.items() %}
<tr {% if disc_code not in mappings %} style="background-color: #f8d7da;" {% endif %}>
    <td><strong><span class="tooltip-trigger" data-tooltip="{{ disc.name }}">{{ disc_code }}</span></strong></td>
    <td style="text-align: left; padding-left: 10px;">{{ disc.name }}</td>
    <td style="text-align: left; font-size: 0.9em;">
        {% if mappings.get(disc_code) and mappings[disc_code].get("competencies") %}
            {% for comp in mappings[disc_code].get("competencies") %}
                <span class="tooltip-trigger" data-tooltip="{{ competencies.get(comp, comp) }}">{{ comp }}</span>{% if not loop.last %}, {% endif %}
            {% endfor %}
        {% else %}
            <em>–Ω–µ –∑–∞–ø–æ–≤–Ω–µ–Ω–æ</em>
        {% endif %}
    </td>
    <td style="text-align: left; font-size: 0.9em;">
        {% if mappings.get(disc_code) and mappings[disc_code].get("program_results") %}
            {% for prog in mappings[disc_code].get("program_results") %}
                <span class="tooltip-trigger" data-tooltip="{{ program_results.get(prog, prog) }}">{{ prog }}</span>{% if not loop.last %}, {% endif %}
            {% endfor %}
        {% else %}
            <em>–Ω–µ –∑–∞–ø–æ–≤–Ω–µ–Ω–æ</em>
        {% endif %}
    </td>
</tr>
{% endfor %}
</table>

<h2>üìñ –ü–∞–º'—è—Ç–∫–∞: —Ä–æ–∑—à–∏—Ñ—Ä–æ–≤–∫–∞ –∫–æ–º–ø–µ—Ç–µ–Ω—Ü—ñ–π —Ç–∞ –ø—Ä–æ–≥—Ä–∞–º–Ω–∏—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤</h2>

<!-- –ö–æ–º–ø–µ—Ç–µ–Ω—Ü—ñ—ó -->
<h3>üéØ –ö–æ–º–ø–µ—Ç–µ–Ω—Ü—ñ—ó</h3>
<table style="width: 100%; font-size: 0.9em;">
<tr><th style="width: 10%;">–ö–æ–¥</th><th style="width: 90%;">–û–ø–∏—Å</th></tr>
{% for comp_code, comp_desc in competencies.items() %}
<tr>
    <td style="text-align: center;"><strong>{{ comp_code }}</strong></td>
    <td style="text-align: left; padding-left: 10px;">{{ comp_desc }}</td>
</tr>
{% endfor %}
</table>

<!-- –ü—Ä–æ–≥—Ä–∞–º–Ω—ñ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏ -->
<h3>üìã –ü—Ä–æ–≥—Ä–∞–º–Ω—ñ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏ –Ω–∞–≤—á–∞–Ω–Ω—è</h3>
<table style="width: 100%; font-size: 0.9em;">
<tr><th style="width: 10%;">–ö–æ–¥</th><th style="width: 90%;">–û–ø–∏—Å</th></tr>
{% for prog_code, prog_desc in program_results.items() %}
<tr>
    <td style="text-align: center;"><strong>{{ prog_code }}</strong></td>
    <td style="text-align: left; padding-left: 10px;">{{ prog_desc }}</td>
</tr>
{% endfor %}
</table>


<script src="assets/tooltip.js"></script>
</body>
</html>
